# Unity é¡¹ç›®ç§»æ¤åˆ° Flutter - å®Œæ•´èµ„æºåŒ…

## ğŸ“š æ–‡æ¡£ç´¢å¼•

æ‚¨çš„é¡¹ç›®ä¸­ç°åœ¨åŒ…å«äº†å®Œæ•´çš„ Unity åˆ° Flutter é›†æˆèµ„æºã€‚ä»¥ä¸‹æ˜¯å„æ–‡æ¡£çš„ç”¨é€”ï¼š

### 1. ğŸ“– FLUTTER_INTEGRATION_GUIDE.md
**å®Œæ•´çš„æŠ€æœ¯é›†æˆæŒ‡å—**
- è¯¦ç»†çš„æ­¥éª¤è¯´æ˜ï¼ˆå…± 8 ä¸ªä¸»è¦æ­¥éª¤ï¼‰
- Unity é…ç½®æ–¹æ³•
- Flutter é¡¹ç›®åˆ›å»º
- Android å’Œ iOS é›†æˆ
- åŒå‘é€šä¿¡å®ç°
- æ€§èƒ½ä¼˜åŒ–å»ºè®®
- å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ
- æ„å»ºå‘å¸ƒæŒ‡å—

**é€‚åˆ**: é¦–æ¬¡é›†æˆï¼Œéœ€è¦è¯¦ç»†äº†è§£æ¯ä¸ªæ­¥éª¤çš„å¼€å‘è€…

---

### 2. âœ… FLUTTER_INTEGRATION_CHECKLIST.md
**å¿«é€Ÿæ£€æŸ¥æ¸…å•**
- åˆ†é˜¶æ®µçš„ä»»åŠ¡åˆ—è¡¨
- æ¯ä¸ªæ­¥éª¤çš„æ—¶é—´ä¼°è®¡
- å¯å‹¾é€‰çš„æ£€æŸ¥é¡¹
- æ•…éšœæ’æŸ¥æ¸…å•
- æ€»æ—¶é—´ä¼°è®¡ï¼ˆçº¦ 30 åˆ†é’Ÿï¼‰

**é€‚åˆ**: è·Ÿè¸ªè¿›åº¦ï¼Œç¡®ä¿ä¸é—æ¼ä»»ä½•æ­¥éª¤

---

### 3. ğŸ’» Assets/Scripts/FlutterCommunication.cs
**Unity ç«¯é€šä¿¡è„šæœ¬**
- å¤„ç†æ¥è‡ª Flutter çš„æ¶ˆæ¯
- å‘é€æ¶ˆæ¯åˆ° Flutter
- åŠ¨ç”»æ§åˆ¶æ–¹æ³•
- JSON æ•°æ®å¤„ç†
- äº‹ä»¶å›è°ƒ

**ä½¿ç”¨æ–¹æ³•**:
1. åœ¨ Unity åœºæ™¯ä¸­åˆ›å»ºç©º GameObjectï¼Œå‘½åä¸º `FlutterBridge`
2. å°†æ­¤è„šæœ¬é™„åŠ åˆ° GameObject
3. ä¿å­˜åœºæ™¯

---

### 4. ğŸ“± FlutterExample/main.dart
**Flutter ç«¯ç¤ºä¾‹ä»£ç **
- å®Œæ•´çš„ Flutter åº”ç”¨
- ç¾è§‚çš„ UI ç•Œé¢
- Unity Widget é›†æˆ
- æ¶ˆæ¯é€šä¿¡ç¤ºä¾‹
- æ§åˆ¶æŒ‰é’®å®ç°

**åŠŸèƒ½åŒ…æ‹¬**:
- å¼€å§‹/æš‚åœ/é‡ç½®åŠ¨ç”»
- åŠ¨æ€æ›´æ–°ä»·æ ¼
- å®æ—¶çŠ¶æ€æ˜¾ç¤º
- SnackBar æ¶ˆæ¯æç¤º

---

### 5. ğŸ“¦ FlutterExample/pubspec.yaml
**Flutter ä¾èµ–é…ç½®æ–‡ä»¶**
- flutter_unity_widget ä¾èµ–
- é¡¹ç›®å…ƒæ•°æ®

**ä½¿ç”¨**: å¤åˆ¶å†…å®¹åˆ°æ‚¨çš„ Flutter é¡¹ç›®

---

### 6. ğŸš€ FlutterExample/README.md
**ç¤ºä¾‹ä»£ç è¯´æ˜æ–‡æ¡£**
- ç¤ºä¾‹ä»£ç ä½¿ç”¨æ–¹æ³•
- åŠŸèƒ½ç‰¹æ€§åˆ—è¡¨
- æ³¨æ„äº‹é¡¹

---

### 7. ğŸ› ï¸ flutter_integration_helper.ps1
**è‡ªåŠ¨åŒ–è¾…åŠ©è„šæœ¬ï¼ˆPowerShellï¼‰**
- è‡ªåŠ¨æ£€æŸ¥ Flutter ç¯å¢ƒ
- åˆ›å»º Flutter é¡¹ç›®
- å¤åˆ¶ Unity å¯¼å‡ºæ–‡ä»¶
- å¤åˆ¶ç¤ºä¾‹ä»£ç 
- æ›´æ–°ä¾èµ–

**è¿è¡Œæ–¹æ³•**:
```powershell
# åœ¨ PowerShell ä¸­
cd F:\Unity\StarFalling_Backup_Unity6
.\flutter_integration_helper.ps1
```

---

## ğŸ¯ å¿«é€Ÿå¼€å§‹æŒ‡å—

### å¦‚æœæ‚¨æ˜¯ç¬¬ä¸€æ¬¡é›†æˆ

1. **é˜…è¯»**: `FLUTTER_INTEGRATION_GUIDE.md` çš„å‰ä¸¤ä¸ªæ­¥éª¤
2. **æ‰§è¡Œ**: åœ¨ Unity ä¸­å¯¼å…¥åŒ…å¹¶é…ç½®
3. **ä½¿ç”¨**: `FLUTTER_INTEGRATION_CHECKLIST.md` è·Ÿè¸ªè¿›åº¦
4. **è¿è¡Œ**: `flutter_integration_helper.ps1` è‡ªåŠ¨åŒ–éƒ¨åˆ†æ­¥éª¤
5. **å‚è€ƒ**: `FlutterExample/main.dart` ç†è§£é€šä¿¡æœºåˆ¶

### å¦‚æœæ‚¨å·²ç»ç†Ÿæ‚‰æµç¨‹

1. **ä½¿ç”¨**: `FLUTTER_INTEGRATION_CHECKLIST.md` å¿«é€Ÿæ‰§è¡Œ
2. **è¿è¡Œ**: `flutter_integration_helper.ps1` åŠ é€Ÿæµç¨‹
3. **å‚è€ƒ**: `FLUTTER_INTEGRATION_GUIDE.md` ä¸­çš„é…ç½®ä»£ç ç‰‡æ®µ

---

## ğŸ“‹ æ ‡å‡†å·¥ä½œæµç¨‹

### Unity ç«¯ï¼ˆ10 åˆ†é’Ÿï¼‰
```
1. å¯¼å…¥ fuw-6000.0.2.unitypackage
2. é…ç½® Player Settings
3. æ·»åŠ  FlutterCommunication è„šæœ¬åˆ°åœºæ™¯
4. å¯¼å‡ºé¡¹ç›® (Flutter > Export Android/iOS)
```

### Flutter ç«¯ï¼ˆ15 åˆ†é’Ÿï¼‰
```
1. åˆ›å»º Flutter é¡¹ç›®
2. æ·»åŠ  flutter_unity_widget ä¾èµ–
3. å¤åˆ¶ç¤ºä¾‹ä»£ç 
4. é›†æˆ Unity å¯¼å‡ºæ–‡ä»¶
5. é…ç½® Android/iOS é¡¹ç›®æ–‡ä»¶
6. è¿è¡Œæµ‹è¯•
```

---

## ğŸ”§ èµ„æºæ–‡ä»¶ä½ç½®

### Unity Package
```
Assets/FlutterAssert/unitypackages/
â”œâ”€â”€ fuw-6000.0.2.unitypackage       (æ¨èï¼ŒUnity 6)
â”œâ”€â”€ fuw-2022.3.2.unitypackage       (å¤‡ç”¨ï¼ŒUnity 2022)
â””â”€â”€ README.md                        (ç‰ˆæœ¬è¯´æ˜)
```

### ç¤ºä¾‹ä»£ç 
```
FlutterExample/
â”œâ”€â”€ main.dart           (Flutter ä¸»åº”ç”¨ä»£ç )
â”œâ”€â”€ pubspec.yaml        (ä¾èµ–é…ç½®)
â””â”€â”€ README.md           (ä½¿ç”¨è¯´æ˜)
```

### Unity è„šæœ¬
```
Assets/Scripts/
â””â”€â”€ FlutterCommunication.cs    (Unity-Flutter é€šä¿¡æ¡¥æ¢)
```

---

## âš™ï¸ é›†æˆæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Flutter Application                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚          main.dart (UI + Controls)             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                     â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚       flutter_unity_widget Package             â”‚ â”‚
â”‚  â”‚    (UnityWidgetController - æ¶ˆæ¯æ¡¥æ¢)           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
          postMessage / onUnityMessage
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Unity Project (Embedded)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  FlutterCommunication.cs (Message Handler) â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                     â”‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     MasterController (Your Game Logic)     â”‚   â”‚
â”‚  â”‚     StarController, PriceTagAnimator...    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ® é€šä¿¡ç¤ºä¾‹

### Flutter è°ƒç”¨ Unity

```dart
// å¼€å§‹åŠ¨ç”»
_unityWidgetController?.postMessage(
  'FlutterBridge',    // GameObject åç§°
  'StartAnimation',   // æ–¹æ³•å
  '',                 // å‚æ•°ï¼ˆå¯é€‰ï¼‰
);

// æ›´æ–°ä»·æ ¼
_unityWidgetController?.postMessage(
  'FlutterBridge',
  'UpdatePrice',
  'Â¥199',
);
```

### Unity å‘é€æ¶ˆæ¯åˆ° Flutter

```csharp
// åœ¨ FlutterCommunication.cs ä¸­
SendMessageToFlutter(new {
    type = "animation_complete",
    message = "åŠ¨ç”»å·²å®Œæˆ",
    success = true
});
```

### Flutter æ¥æ”¶ Unity æ¶ˆæ¯

```dart
void _onUnityMessage(message) {
  final data = jsonDecode(message);
  print('ç±»å‹: ${data['type']}');
  print('æ¶ˆæ¯: ${data['message']}');
}
```

---

## ğŸ“± æ”¯æŒçš„å¹³å°

| å¹³å° | æ”¯æŒçŠ¶æ€ | æœ€ä½ç‰ˆæœ¬ |
|------|---------|----------|
| Android | âœ… å®Œå…¨æ”¯æŒ | API 22 (Android 5.1) |
| iOS | âœ… å®Œå…¨æ”¯æŒ | iOS 12.0 |
| Web | âš ï¸ å®éªŒæ€§ | - |
| Desktop | âŒ ä¸æ”¯æŒ | - |

---

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### Unity é¡¹ç›®è¦æ±‚
- âœ… Unity 6.x æˆ– Unity 2022.3+
- âœ… URPï¼ˆUniversal Render Pipelineï¼‰
- âœ… IL2CPP ç¼–è¯‘ï¼ˆæ¨èï¼‰
- âœ… åœºæ™¯å¿…é¡»åœ¨ Build Settings ä¸­

### Flutter é¡¹ç›®è¦æ±‚
- âœ… Flutter 3.0+
- âœ… Dart 3.0+
- âœ… Android SDK å’Œ NDK
- âœ… iOS: Xcode 14+ï¼ˆMac ä¸Šï¼‰

### GameObject å‘½å
- âš ï¸ **é‡è¦**: GameObject åç§°å¿…é¡»æ˜¯ `FlutterBridge`
- è¿™æ˜¯ Flutter å’Œ Unity é€šä¿¡çš„æ¡¥æ¢
- å¦‚æœæ›´æ”¹åç§°ï¼Œéœ€è¦åŒæ—¶ä¿®æ”¹ Flutter ä»£ç 

---

## ğŸ› å¸¸è§é—®é¢˜å¿«é€Ÿç´¢å¼•

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆä½ç½® |
|------|-------------|
| Unity é»‘å± | FLUTTER_INTEGRATION_GUIDE.md - é—®é¢˜ 2 |
| Newtonsoft å†²çª | FLUTTER_INTEGRATION_GUIDE.md - é—®é¢˜ 1 |
| Android ç¼–è¯‘é”™è¯¯ | FLUTTER_INTEGRATION_GUIDE.md - é—®é¢˜ 3 |
| iOS ç¼–è¯‘é”™è¯¯ | FLUTTER_INTEGRATION_GUIDE.md - é—®é¢˜ 4 |
| æ¶ˆæ¯æ— æ³•é€šä¿¡ | FLUTTER_INTEGRATION_CHECKLIST.md - æ•…éšœæ’æŸ¥ |

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®

### Unity ç«¯
- ä½¿ç”¨å¯¹è±¡æ± ç®¡ç†æ˜Ÿæ˜Ÿç”Ÿæˆ
- é™ä½ç²’å­æ•ˆæœå¤æ‚åº¦
- ä¼˜åŒ–æè´¨å’Œç€è‰²å™¨
- ä½¿ç”¨ IL2CPP ç¼–è¯‘
- ç¦ç”¨ä¸å¿…è¦çš„ç‰©ç†è®¡ç®—

### Flutter ç«¯
- åœ¨ä¸éœ€è¦æ—¶æš‚åœ Unity
- ä½¿ç”¨åˆé€‚çš„ Unity Widget å¤§å°
- é¿å…é¢‘ç¹çš„æ¶ˆæ¯ä¼ é€’
- ä½¿ç”¨å¼‚æ­¥æ¶ˆæ¯å¤„ç†

---

## ğŸ“¦ å¯¼å‡ºå’Œå‘å¸ƒ

### Android APK
```bash
flutter build apk --release
```

### Android AAB (Google Play)
```bash
flutter build appbundle --release
```

### iOS IPA
```bash
flutter build ios --release
# ç„¶ååœ¨ Xcode ä¸­æ‰“åŒ…
```

---

## ğŸ“ å­¦ä¹ è·¯å¾„

### åˆå­¦è€…
1. é˜…è¯» `FLUTTER_INTEGRATION_GUIDE.md` ç¬¬ 1-4 æ­¥
2. è·Ÿéš `FLUTTER_INTEGRATION_CHECKLIST.md` æ‰§è¡Œ
3. è¿è¡Œç¤ºä¾‹ä»£ç ç†è§£é€šä¿¡æœºåˆ¶
4. ä¿®æ”¹ä»·æ ¼å‚æ•°è¿›è¡Œå®éªŒ

### è¿›é˜¶å¼€å‘è€…
1. ç ”ç©¶ `FlutterCommunication.cs` çš„å®ç°
2. æ‰©å±•é€šä¿¡æ–¹æ³•æ·»åŠ æ–°åŠŸèƒ½
3. ä¼˜åŒ– Unity åœºæ™¯æ€§èƒ½
4. è‡ªå®šä¹‰ Flutter UI

### ä¸“å®¶çº§
1. å®ç°å¤æ‚çš„æ•°æ®ç»“æ„ä¼ é€’
2. æ·»åŠ åœºæ™¯åˆ‡æ¢åŠŸèƒ½
3. å®ç° Unity èµ„æºçƒ­æ›´æ–°
4. ä¼˜åŒ–å†…å­˜å’Œæ€§èƒ½

---

## ğŸ“ è·å–å¸®åŠ©

### æŸ¥çœ‹æ—¥å¿—
```bash
# Flutter æ—¥å¿—
flutter logs

# Android æ—¥å¿—ï¼ˆé€šè¿‡ ADBï¼‰
adb logcat | findstr Unity

# Unity æ—¥å¿—ä½ç½®
# Android: /sdcard/Android/data/<package>/files/
# iOS: Xcode Console
```

### æœ‰ç”¨çš„é“¾æ¥
- [flutter_unity_widget GitHub](https://github.com/juicycleff/flutter-unity-view-widget)
- [Unity æ–‡æ¡£](https://docs.unity3d.com/)
- [Flutter æ–‡æ¡£](https://flutter.dev/docs)

---

## âœ… é›†æˆæˆåŠŸæ ‡å¿—

å¦‚æœæ‚¨çœ‹åˆ°ä»¥ä¸‹æƒ…å†µï¼Œè¯´æ˜é›†æˆæˆåŠŸï¼š

- âœ… Flutter åº”ç”¨æ­£å¸¸å¯åŠ¨
- âœ… Unity åœºæ™¯åœ¨ Flutter ä¸­æ˜¾ç¤º
- âœ… å¯ä»¥çœ‹åˆ°æ˜Ÿæ˜Ÿä¸‹è½åŠ¨ç”»
- âœ… ç‚¹å‡»æŒ‰é’®æœ‰å“åº”
- âœ… ä»·æ ¼æ›´æ–°åŠŸèƒ½æ­£å¸¸
- âœ… çŠ¶æ€æ¶ˆæ¯æ­£ç¡®æ˜¾ç¤º
- âœ… æš‚åœ/æ¢å¤åŠŸèƒ½æ­£å¸¸

---

## ğŸ‰ æ­å–œï¼

æ‚¨ç°åœ¨æ‹¥æœ‰äº†å°† Unity é¡¹ç›®é›†æˆåˆ° Flutter çš„å®Œæ•´èµ„æºåŒ…ï¼

### ä¸‹ä¸€æ­¥å»ºè®®

1. âœ¨ å®ŒæˆåŸºæœ¬é›†æˆ
2. ğŸ¨ è‡ªå®šä¹‰ Flutter UI
3. ğŸ® æ·»åŠ æ›´å¤š Unity äº¤äº’
4. ğŸ“± æµ‹è¯•ä¸åŒè®¾å¤‡
5. ğŸš€ å‡†å¤‡å‘å¸ƒ

---

## ğŸ“„ æ–‡æ¡£ç‰ˆæœ¬

- åˆ›å»ºæ—¥æœŸ: 2025å¹´11æœˆ2æ—¥
- Unity ç‰ˆæœ¬: Unity 6
- Flutter ç‰ˆæœ¬: Flutter 3.0+
- flutter_unity_widget: 2022.2.0

---

**ç¥æ‚¨å¼€å‘é¡ºåˆ©ï¼** ğŸš€

å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒç›¸åº”çš„è¯¦ç»†æ–‡æ¡£ã€‚
