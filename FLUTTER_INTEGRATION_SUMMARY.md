# âœ¨ Unity åˆ° Flutter é›†æˆ - åˆ›å»ºå®Œæˆï¼

## ğŸ‰ æ­å–œï¼æ‚¨ç°åœ¨æ‹¥æœ‰å®Œæ•´çš„ Unity åˆ° Flutter é›†æˆèµ„æºåŒ…

æˆ‘å·²ç»ä¸ºæ‚¨çš„ StarFalling é¡¹ç›®åˆ›å»ºäº†å®Œæ•´çš„ Flutter é›†æˆè§£å†³æ–¹æ¡ˆã€‚

---

## ğŸ“¦ å·²åˆ›å»ºçš„æ–‡ä»¶åˆ—è¡¨

### ğŸ“š ä¸»è¦æ–‡æ¡£ï¼ˆ4ä¸ªï¼‰

1. **FLUTTER_INTEGRATION_INDEX.md** â­ 
   - ğŸ“ **ä»è¿™é‡Œå¼€å§‹ï¼**
   - æ‰€æœ‰èµ„æºçš„æ€»ç´¢å¼•
   - å¿«é€Ÿå¯¼èˆªæŒ‡å—
   - æ¶æ„è¯´æ˜
   - å­¦ä¹ è·¯å¾„å»ºè®®

2. **FLUTTER_INTEGRATION_GUIDE.md**
   - 8ä¸ªä¸»è¦æ­¥éª¤çš„å®Œæ•´æ•™ç¨‹
   - Unity é…ç½®è¯¦ç»†è¯´æ˜
   - Flutter é¡¹ç›®åˆ›å»º
   - Android å’Œ iOS é›†æˆ
   - åŒå‘é€šä¿¡å®ç°
   - æ€§èƒ½ä¼˜åŒ–
   - å¸¸è§é—®é¢˜è§£å†³

3. **FLUTTER_INTEGRATION_CHECKLIST.md**
   - å¯å‹¾é€‰çš„ä»»åŠ¡æ¸…å•
   - æ¯æ­¥æ—¶é—´ä¼°è®¡ï¼ˆæ€»è®¡30åˆ†é’Ÿï¼‰
   - æ•…éšœæ’æŸ¥æ¸…å•
   - éªŒè¯æ­¥éª¤

4. **FLUTTER_INTEGRATION_SUMMARY.md**ï¼ˆæœ¬æ–‡ä»¶ï¼‰
   - åˆ›å»ºå†…å®¹æ€»ç»“
   - å¿«é€Ÿå¼€å§‹æŒ‡å—

### ğŸ’» ä»£ç æ–‡ä»¶ï¼ˆ3ä¸ªï¼‰

5. **Assets/Scripts/FlutterCommunication.cs**
   - Unity ç«¯é€šä¿¡è„šæœ¬
   - æ¶ˆæ¯æ¥æ”¶å’Œå‘é€
   - åŠ¨ç”»æ§åˆ¶æ–¹æ³•
   - JSON æ•°æ®å¤„ç†
   - äº‹ä»¶å›è°ƒç³»ç»Ÿ

6. **FlutterExample/main.dart**
   - å®Œæ•´çš„ Flutter ç¤ºä¾‹åº”ç”¨
   - ç¾è§‚çš„ UI ç•Œé¢
   - Unity Widget é›†æˆ
   - æ¶ˆæ¯é€šä¿¡å®ç°
   - æ‰€æœ‰æ§åˆ¶æŒ‰é’®

7. **FlutterExample/pubspec.yaml**
   - Flutter ä¾èµ–é…ç½®
   - flutter_unity_widget åŒ…

### ğŸ“– è¾…åŠ©æ–‡æ¡£ï¼ˆ2ä¸ªï¼‰

8. **FlutterExample/README.md**
   - ç¤ºä¾‹ä»£ç ä½¿ç”¨è¯´æ˜
   - åŠŸèƒ½ç‰¹æ€§åˆ—è¡¨
   - å¸¸è§é—®é¢˜

9. **README.md**ï¼ˆå·²æ›´æ–°ï¼‰
   - æ·»åŠ äº† Flutter é›†æˆéƒ¨åˆ†
   - æ›´æ–°äº†æ–‡æ¡£ç´¢å¼•
   - æ·»åŠ äº†å¿«é€Ÿå¼€å§‹æŒ‡å—

### ğŸ› ï¸ è‡ªåŠ¨åŒ–å·¥å…·ï¼ˆ1ä¸ªï¼‰

10. **flutter_integration_helper.ps1**
    - PowerShell è‡ªåŠ¨åŒ–è„šæœ¬
    - ç¯å¢ƒæ£€æŸ¥
    - é¡¹ç›®åˆ›å»º
    - æ–‡ä»¶å¤åˆ¶
    - ä¾èµ–å®‰è£…

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆ3 æ­¥èµ°ï¼‰

### ç¬¬ 1 æ­¥ï¼šäº†è§£èµ„æº
```
ğŸ“‚ æ‰“å¼€æ–‡ä»¶: FLUTTER_INTEGRATION_INDEX.md
ğŸ‘€ é˜…è¯»æ—¶é—´: 5 åˆ†é’Ÿ
ğŸ“ å†…å®¹: äº†è§£æ‰€æœ‰å¯ç”¨èµ„æºå’Œå®ƒä»¬çš„ç”¨é€”
```

### ç¬¬ 2 æ­¥ï¼šé€‰æ‹©æ‚¨çš„è·¯å¾„

**è·¯å¾„ A - å¿«é€Ÿé›†æˆï¼ˆæ¨èåˆæ¬¡ä½¿ç”¨ï¼‰**
```
1. æ‰“å¼€ FLUTTER_INTEGRATION_CHECKLIST.md
2. æŒ‰ç…§æ¸…å•é€æ­¥æ‰§è¡Œ
3. å‹¾é€‰å®Œæˆçš„é¡¹ç›®
â±ï¸ æ—¶é—´: çº¦ 30 åˆ†é’Ÿ
```

**è·¯å¾„ B - è‡ªåŠ¨åŒ– + æ‰‹åŠ¨ï¼ˆæœ€å¿«ï¼‰**
```
1. åœ¨ Unity ä¸­å®Œæˆæ­¥éª¤ 1-4ï¼ˆCHECKLIST çš„ Unity éƒ¨åˆ†ï¼‰
2. è¿è¡Œ: .\flutter_integration_helper.ps1
3. å®Œæˆå‰©ä½™çš„æ‰‹åŠ¨é…ç½®æ­¥éª¤
â±ï¸ æ—¶é—´: çº¦ 20 åˆ†é’Ÿ
```

**è·¯å¾„ C - è¯¦ç»†å­¦ä¹ ï¼ˆé€‚åˆæ·±å…¥ç†è§£ï¼‰**
```
1. é˜…è¯» FLUTTER_INTEGRATION_GUIDE.md
2. é€æ­¥æ‰§è¡Œæ¯ä¸ªæ­¥éª¤
3. ç†è§£æ¯ä¸ªé…ç½®çš„åŸå› 
â±ï¸ æ—¶é—´: çº¦ 1 å°æ—¶ï¼ˆå«å­¦ä¹ ï¼‰
```

### ç¬¬ 3 æ­¥ï¼šå¼€å§‹é›†æˆ

#### Unity ç«¯ï¼ˆ10 åˆ†é’Ÿï¼‰
```
1. æ‰“å¼€ Unity é¡¹ç›®
2. å¯¼å…¥åŒ…: Assets > Import Package > Custom Package
   é€‰æ‹©: Assets/FlutterAssert/unitypackages/fuw-6000.0.2.unitypackage
3. é…ç½® Player Settingsï¼ˆå‚è€ƒ CHECKLISTï¼‰
4. æ·»åŠ  FlutterCommunication è„šæœ¬åˆ°åœºæ™¯
   - åˆ›å»ºç©º GameObject "FlutterBridge"
   - é™„åŠ  Assets/Scripts/FlutterCommunication.cs
5. å¯¼å‡º: Flutter > Export Android
```

#### Flutter ç«¯ï¼ˆ20 åˆ†é’Ÿï¼‰
```powershell
# æ–¹æ³• 1: ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰
.\flutter_integration_helper.ps1

# æ–¹æ³• 2: æ‰‹åŠ¨æ‰§è¡Œ
flutter create star_falling_flutter
cd star_falling_flutter
# ç„¶åæŒ‰ç…§ CHECKLIST å®Œæˆé…ç½®
```

---

## ğŸ“‹ é›†æˆæ­¥éª¤æ¦‚è§ˆ

```
Unity ç«¯
â”œâ”€ 1. å¯¼å…¥ Flutter Unity Integration åŒ… (2åˆ†é’Ÿ)
â”œâ”€ 2. é…ç½® Player Settings (3åˆ†é’Ÿ)
â”œâ”€ 3. æ·»åŠ é€šä¿¡è„šæœ¬åˆ°åœºæ™¯ (2åˆ†é’Ÿ)
â”œâ”€ 4. æ·»åŠ åœºæ™¯åˆ° Build Settings (1åˆ†é’Ÿ)
â””â”€ 5. å¯¼å‡ºé¡¹ç›® (2-5åˆ†é’Ÿ)

Flutter ç«¯
â”œâ”€ 1. åˆ›å»º Flutter é¡¹ç›® (2åˆ†é’Ÿ)
â”œâ”€ 2. æ·»åŠ ä¾èµ– (1åˆ†é’Ÿ)
â”œâ”€ 3. å¤åˆ¶ç¤ºä¾‹ä»£ç  (1åˆ†é’Ÿ)
â”œâ”€ 4. é›†æˆ Unity æ–‡ä»¶ (5åˆ†é’Ÿ)
â””â”€ 5. è¿è¡Œæµ‹è¯• (5åˆ†é’Ÿ)

æ€»è®¡: çº¦ 30 åˆ†é’Ÿ
```

---

## ğŸ¯ é‡è¦æ–‡ä»¶ä½ç½®

### Unity Packageï¼ˆå·²å­˜åœ¨ï¼‰
```
Assets/FlutterAssert/unitypackages/
â””â”€â”€ fuw-6000.0.2.unitypackage  â† ä½¿ç”¨è¿™ä¸ª
```

### æ–°åˆ›å»ºçš„è„šæœ¬
```
Assets/Scripts/
â””â”€â”€ FlutterCommunication.cs  â† Unity é€šä¿¡æ¡¥æ¢
```

### ç¤ºä¾‹ä»£ç 
```
FlutterExample/
â”œâ”€â”€ main.dart          â† å¤åˆ¶åˆ° Flutter é¡¹ç›®
â”œâ”€â”€ pubspec.yaml       â† å‚è€ƒä¾èµ–é…ç½®
â””â”€â”€ README.md          â† ä½¿ç”¨è¯´æ˜
```

### è‡ªåŠ¨åŒ–è„šæœ¬
```
flutter_integration_helper.ps1  â† åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
```

---

## ğŸ’¡ å…³é”®æ¦‚å¿µ

### é€šä¿¡æ¶æ„
```
Flutter App (UI å±‚)
    â†“ postMessage
[flutter_unity_widget]
    â†“ è°ƒç”¨æ–¹æ³•
Unity GameObject: FlutterBridge
    â†“ æ‰§è¡Œ
FlutterCommunication.cs
    â†“ æ§åˆ¶
MasterController / StarController / etc.
```

### æ¶ˆæ¯æµç¨‹

**Flutter â†’ Unity**
```dart
_unityWidgetController?.postMessage(
  'FlutterBridge',     // GameObject åç§°
  'StartAnimation',    // æ–¹æ³•å
  ''                   // å‚æ•°
);
```

**Unity â†’ Flutter**
```csharp
SendMessageToFlutter(new {
    type = "animation_complete",
    message = "åŠ¨ç”»å·²å®Œæˆ"
});
```

---

## âœ… é›†æˆæˆåŠŸæ ‡å¿—

å®Œæˆåï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿï¼š

- âœ… Flutter åº”ç”¨æ­£å¸¸å¯åŠ¨
- âœ… Unity åœºæ™¯åœ¨ Flutter ä¸­æ˜¾ç¤º
- âœ… çœ‹åˆ°æ˜Ÿæ˜Ÿä¸‹è½åŠ¨ç”»
- âœ… ç‚¹å‡»"å¼€å§‹åŠ¨ç”»"æŒ‰é’®æœ‰ååº”
- âœ… ä»·æ ¼æ›´æ–°åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- âœ… æš‚åœ/æ¢å¤åŠŸèƒ½æ­£å¸¸
- âœ… çœ‹åˆ°çŠ¶æ€æ¶ˆæ¯æ˜¾ç¤º

---

## ğŸ“± ç¤ºä¾‹åº”ç”¨åŠŸèƒ½

åˆ›å»ºçš„ Flutter ç¤ºä¾‹åŒ…å«ï¼š

1. **Unity åœºæ™¯æ˜¾ç¤ºåŒºåŸŸ**
   - åµŒå…¥å¼ Unity Widget
   - åŠ è½½æŒ‡ç¤ºå™¨
   - å ç”¨ 3/5 çš„å±å¹•

2. **æ§åˆ¶é¢æ¿**
   - å¼€å§‹åŠ¨ç”»æŒ‰é’®
   - é‡ç½®åŠ¨ç”»æŒ‰é’®
   - è·å–çŠ¶æ€æŒ‰é’®
   - ä»·æ ¼è¾“å…¥æ¡†
   - å¿«é€Ÿä»·æ ¼é€‰æ‹©æŒ‰é’®
   - é«˜çº§è®¾ç½®æŒ‰é’®

3. **çŠ¶æ€æ˜¾ç¤º**
   - å®æ—¶çŠ¶æ€æ¶ˆæ¯
   - è¿æ¥çŠ¶æ€æŒ‡ç¤ºå™¨
   - SnackBar é€šçŸ¥

4. **AppBar æ§åˆ¶**
   - æš‚åœ/æ’­æ”¾åˆ‡æ¢æŒ‰é’®

---

## ğŸ”§ è‡ªå®šä¹‰å’Œæ‰©å±•

### æ·»åŠ æ–°çš„æ§åˆ¶æ–¹æ³•

**åœ¨ Unity (FlutterCommunication.cs) ä¸­:**
```csharp
public void YourNewMethod(string parameter)
{
    // æ‚¨çš„é€»è¾‘
    SendMessageToFlutter(new {
        type = "your_event",
        message = "å®Œæˆ"
    });
}
```

**åœ¨ Flutter (main.dart) ä¸­:**
```dart
void callYourMethod() {
  _unityWidgetController?.postMessage(
    'FlutterBridge',
    'YourNewMethod',
    'parameter_value',
  );
}
```

### ä¼ é€’å¤æ‚æ•°æ®

**Flutter å‘é€ JSON:**
```dart
final data = {'price': 'Â¥99', 'duration': 2.0};
_unityWidgetController?.postMessage(
  'FlutterBridge',
  'UpdateSettings',
  jsonEncode(data),
);
```

**Unity æ¥æ”¶å’Œè§£æ:**
```csharp
public void UpdateSettings(string jsonData)
{
    var settings = JsonUtility.FromJson<AnimationSettings>(jsonData);
    // ä½¿ç”¨ settings...
}
```

---

## ğŸ› é‡åˆ°é—®é¢˜ï¼Ÿ

### æŸ¥çœ‹æ—¥å¿—
```bash
# Flutter æ—¥å¿—
flutter logs

# Unity æ—¥å¿—ï¼ˆAndroidï¼‰
adb logcat | findstr Unity
```

### å¸¸è§é—®é¢˜å¿«é€Ÿä¿®å¤

**Unity é»‘å±**
```
1. æ£€æŸ¥åœºæ™¯æ˜¯å¦åœ¨ Build Settings ä¸­
2. éªŒè¯ Player Settings é…ç½®
3. é‡æ–°å¯¼å‡º Unity é¡¹ç›®
```

**æ¶ˆæ¯æ— æ³•é€šä¿¡**
```
1. ç¡®è®¤ GameObject åç§°æ˜¯ "FlutterBridge"
2. æ£€æŸ¥ FlutterCommunication è„šæœ¬å·²é™„åŠ 
3. æŸ¥çœ‹ä¸¤è¾¹çš„æ—¥å¿—
```

**ç¼–è¯‘é”™è¯¯**
```bash
flutter clean
flutter pub get
cd android && ./gradlew clean
cd ..
flutter run
```

---

## ğŸ“š æ¨èé˜…è¯»é¡ºåº

### ç¬¬ä¸€æ¬¡é›†æˆ
1. ğŸ“– FLUTTER_INTEGRATION_INDEX.mdï¼ˆ5åˆ†é’Ÿï¼‰
2. âœ… FLUTTER_INTEGRATION_CHECKLIST.mdï¼ˆè·Ÿéšæ‰§è¡Œï¼‰
3. ğŸ’» æŸ¥çœ‹ FlutterExample/main.dartï¼ˆç†è§£ä»£ç ï¼‰

### æ·±å…¥å­¦ä¹ 
1. ğŸ“– FLUTTER_INTEGRATION_GUIDE.mdï¼ˆå®Œæ•´æ•™ç¨‹ï¼‰
2. ğŸ” ç ”ç©¶ FlutterCommunication.csï¼ˆé€šä¿¡æœºåˆ¶ï¼‰
3. ğŸ¨ è‡ªå®šä¹‰ Flutter UI

### é—®é¢˜æ’æŸ¥
1. ğŸ“‹ CHECKLIST çš„æ•…éšœæ’æŸ¥éƒ¨åˆ†
2. ğŸ“– GUIDE çš„å¸¸è§é—®é¢˜éƒ¨åˆ†
3. ğŸ” æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶

---

## ğŸ“ å­¦ä¹ èµ„æº

### é¡¹ç›®ä¸­çš„èµ„æº
- `FLUTTER_INTEGRATION_INDEX.md` - æ€»ç´¢å¼•
- `FLUTTER_INTEGRATION_GUIDE.md` - è¯¦ç»†æ•™ç¨‹
- `FLUTTER_INTEGRATION_CHECKLIST.md` - å®æˆ˜æ¸…å•
- `FlutterExample/` - ç¤ºä¾‹ä»£ç 

### å¤–éƒ¨èµ„æº
- [flutter_unity_widget GitHub](https://github.com/juicycleff/flutter-unity-view-widget)
- [Unity æ–‡æ¡£](https://docs.unity3d.com/)
- [Flutter æ–‡æ¡£](https://flutter.dev/docs)

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³å¼€å§‹
```powershell
# 1. æ‰“å¼€ç´¢å¼•æ–‡æ¡£
# åœ¨ VS Code ä¸­æ‰“å¼€: FLUTTER_INTEGRATION_INDEX.md

# 2. é€‰æ‹©é›†æˆæ–¹å¼å¹¶å¼€å§‹
# æŸ¥çœ‹æœ¬æ–‡çš„"å¿«é€Ÿå¼€å§‹"éƒ¨åˆ†

# 3. æœ‰é—®é¢˜éšæ—¶æŸ¥çœ‹æ–‡æ¡£
```

### æ¨èå·¥ä½œæµ
```
ä»Šå¤©:
  â””â”€ é˜…è¯» INDEX å’Œ CHECKLIST
  â””â”€ å®Œæˆ Unity ç«¯è®¾ç½®ï¼ˆ10åˆ†é’Ÿï¼‰

æ˜å¤©:
  â””â”€ è¿è¡Œè‡ªåŠ¨åŒ–è„šæœ¬
  â””â”€ å®Œæˆ Flutter é›†æˆï¼ˆ20åˆ†é’Ÿï¼‰
  â””â”€ æµ‹è¯•å’Œè°ƒè¯•
```

---

## ğŸ“Š æ–‡ä»¶ç»Ÿè®¡

- ğŸ“š **æ–‡æ¡£æ–‡ä»¶**: 4 ä¸ªä¸»è¦æ–‡æ¡£ + 2 ä¸ªè¾…åŠ©æ–‡æ¡£
- ğŸ’» **ä»£ç æ–‡ä»¶**: 3 ä¸ªï¼ˆC# + Dart + YAMLï¼‰
- ğŸ› ï¸ **å·¥å…·è„šæœ¬**: 1 ä¸ª PowerShell è„šæœ¬
- ğŸ“ **æ€»å­—æ•°**: çº¦ 15,000+ å­—
- â±ï¸ **é¢„è®¡å®Œæˆæ—¶é—´**: 30 åˆ†é’Ÿï¼ˆå¿«é€Ÿï¼‰åˆ° 1 å°æ—¶ï¼ˆè¯¦ç»†å­¦ä¹ ï¼‰

---

## âœ¨ ç‰¹åˆ«è¯´æ˜

### ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªæ–¹æ¡ˆï¼Ÿ

1. **å®Œæ•´æ€§** - ä»é›¶åˆ°å‘å¸ƒçš„å®Œæ•´æµç¨‹
2. **çµæ´»æ€§** - æä¾›å¤šç§é›†æˆè·¯å¾„
3. **è‡ªåŠ¨åŒ–** - PowerShell è„šæœ¬å‡å°‘æ‰‹åŠ¨å·¥ä½œ
4. **æ–‡æ¡£åŒ–** - æ¯ä¸ªæ­¥éª¤éƒ½æœ‰è¯¦ç»†è¯´æ˜
5. **å®ç”¨æ€§** - åŒ…å«å¯è¿è¡Œçš„ç¤ºä¾‹ä»£ç 

### è¿™ä¸ªèµ„æºåŒ…çš„ä¼˜åŠ¿

- âœ… **é›¶ä¾èµ–å¤–éƒ¨æ•™ç¨‹** - æ‰€æœ‰ä¿¡æ¯éƒ½åœ¨é¡¹ç›®ä¸­
- âœ… **ç‰ˆæœ¬åŒ¹é…** - ä¸“ä¸º Unity 6 å’Œæ‚¨çš„é¡¹ç›®å®šåˆ¶
- âœ… **åŒå‘é€šä¿¡** - å®Œæ•´çš„ Flutter â†” Unity é€šä¿¡
- âœ… **å¼€ç®±å³ç”¨** - ç¤ºä¾‹ä»£ç å¯ç›´æ¥è¿è¡Œ
- âœ… **æŒç»­æ›´æ–°** - å¯ä»¥æ ¹æ®éœ€è¦æ‰©å±•

---

## ğŸ‰ æœ€åçš„è¯

æ‚¨ç°åœ¨æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´ã€ä¸“ä¸šçš„ Unity åˆ° Flutter é›†æˆè§£å†³æ–¹æ¡ˆï¼

### è®°ä½è¿™ 3 ä¸ªæ–‡ä»¶
1. ğŸ“š `FLUTTER_INTEGRATION_INDEX.md` - å¼€å§‹è¿™é‡Œ
2. âœ… `FLUTTER_INTEGRATION_CHECKLIST.md` - æ‰§è¡Œè¿™ä¸ª
3. ğŸ› ï¸ `flutter_integration_helper.ps1` - è¿è¡Œè¿™ä¸ª

### 30 åˆ†é’Ÿå
æ‚¨å°†æ‹¥æœ‰ä¸€ä¸ªåœ¨ Flutter ä¸­è¿è¡Œçš„ Unity åŠ¨ç”»ï¼

---

**ç¥æ‚¨é›†æˆé¡ºåˆ©ï¼** ğŸš€

æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·å‚è€ƒç›¸åº”çš„è¯¦ç»†æ–‡æ¡£ã€‚æ‰€æœ‰ç­”æ¡ˆéƒ½åœ¨è¿™äº›æ–‡ä»¶ä¸­ï¼

---

ğŸ“… åˆ›å»ºæ—¥æœŸ: 2025å¹´11æœˆ2æ—¥  
ğŸ”§ Unity ç‰ˆæœ¬: Unity 6  
ğŸ“± Flutter ç‰ˆæœ¬: 3.0+  
ğŸ“¦ æ’ä»¶ç‰ˆæœ¬: flutter_unity_widget 2022.2.0  
